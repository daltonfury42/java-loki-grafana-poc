This is how the project was setup:

helm repo add grafana https://grafana.github.io/helm-charts

helm repo update

helm upgrade --install loki grafana/loki-stack --namespace=loki --create-namespace
helm upgrade --install grafana grafana/grafana --namespace=grafana --create-namespace --set adminPassword='admin'

kubectl port-forward -n grafana svc/grafana 3000:80

# Fix version compatibility issue between loki/grafana by specifying loki image tag
helm upgrade --install loki grafana/loki-stack --namespace=loki --set promtail.enabled=true --set loki.image.tag=2.9.15

# Add data source in grafana at this point

mvn clean package
docker build -t my-java-app:v3 .
minikube image load my-java-app:v1

#Edit java-app.yaml with new image tag v3
kubectl replace --force -f java-app.yaml

# Optionally if you want to see promatail config used - edit the file and reappload.
kubectl get secret loki-promtail -n loki -o jsonpath="{.data['promtail\.yaml']}" | base64 --decode > my-config.yaml

# Apply the given updated provided config and restart promtail pod
kubectl create secret generic loki-promtail -n loki --from-file=promtail.yaml=my-config_provided.yaml --dry-run=client -o yaml | kubectl apply -f -
kubectl delete pod loki-promttail-abcde -n loki